#!/bin/bash
#
# Copyright (C) 2019-2021 The LineageOS Project
#
# SPDX-License-Identifier: Apache-2.0
#

set -e

# Load extract_utils and do some sanity checks
MY_DIR="${BASH_SOURCE%/*}"
if [[ ! -d "${MY_DIR}" ]]; then MY_DIR="${PWD}"; fi

ANDROID_ROOT="${MY_DIR}/../../../.."

HELPER="${ANDROID_ROOT}/tools/extract-utils/extract_utils.sh"
if [ ! -f "${HELPER}" ]; then
    echo "Unable to find helper script at ${HELPER}"
    exit 1
fi
source "${HELPER}"

_input_image="${1}"
_output_file="${2}"

if [ -z "${_input_image}" ]; then
    echo "No input image supplied"
    exit 1
fi

if [ -z "${_output_file}" ]; then
    echo "No output filename supplied"
    exit 1
fi

VENDOR_SKIP_FILES=(
    # Standard build output with vendor image build enabled
    "bin/["
    "bin/acpi"
    "bin/awk"
    "bin/base64"
    "bin/basename"
    "bin/blockdev"
    "bin/boringssl_self_test32"
    "bin/boringssl_self_test64"
    "bin/cal"
    "bin/cat"
    "bin/chattr"
    "bin/chcon"
    "bin/checkpoint_gc"
    "bin/chgrp"
    "bin/chmod"
    "bin/chown"
    "bin/chroot"
    "bin/chrt"
    "bin/cksum"
    "bin/clear"
    "bin/cmp"
    "bin/comm"
    "bin/cp"
    "bin/cpio"
    "bin/cut"
    "bin/date"
    "bin/dd"
    "bin/devmem"
    "bin/df"
    "bin/diff"
    "bin/dirname"
    "bin/dmesg"
    "bin/dos2unix"
    "bin/du"
    "bin/dumpsys"
    "bin/echo"
    "bin/egrep"
    "bin/env"
    "bin/expand"
    "bin/expr"
    "bin/fallocate"
    "bin/false"
    "bin/fgrep"
    "bin/file"
    "bin/find"
    "bin/flock"
    "bin/fmt"
    "bin/free"
    "bin/fsync"
    "bin/getconf"
    "bin/getenforce"
    "bin/getevent"
    "bin/getprop"
    "bin/grep"
    "bin/groups"
    "bin/gunzip"
    "bin/gzip"
    "bin/head"
    "bin/hostname"
    "bin/hw/android.hardware.atrace@1.0-service.pixel"
    "bin/hw/android.hardware.audio.service"
    "bin/hw/android.hardware.boot@1.2-service-gs101"
    "bin/hw/android.hardware.cas@1.2-service"
    "bin/hw/android.hardware.contexthub-service.generic"
    "bin/hw/android.hardware.drm-service.clearkey"
    "bin/hw/android.hardware.dumpstate@1.1-service.gs101"
    "bin/hw/android.hardware.gatekeeper@1.0-service.trusty"
    "bin/hw/android.hardware.gnss@2.1-service-brcm"
    "bin/hw/android.hardware.graphics.allocator-V1-service"
    "bin/hw/android.hardware.graphics.composer@2.4-service"
    "bin/hw/android.hardware.health-service.gs101"
    "bin/hw/android.hardware.health.storage-service.default"
    "bin/hw/android.hardware.media.omx@1.0-service"
    "bin/hw/android.hardware.memtrack-service.pixel"
    "bin/hw/android.hardware.neuralnetworks@1.3-service-armnn"
    "bin/hw/android.hardware.nfc-service.st"
    "bin/hw/android.hardware.power-service.pixel-libperfmgr"
    "bin/hw/android.hardware.power.stats-service.pixel"
    "bin/hw/android.hardware.secure_element@1.2-service-gto"
    "bin/hw/android.hardware.secure_element@1.2-service-gto-ese2"
    "bin/hw/android.hardware.security.keymint-service.trusty"
    "bin/hw/android.hardware.sensors@2.1-service.multihal"
    "bin/hw/android.hardware.thermal@2.0-service.pixel"
    "bin/hw/android.hardware.usb-service.gs101"
    "bin/hw/android.hardware.usb.gadget-service.gs101"
    "bin/hw/android.hardware.vibrator-service.cs40l25"
    "bin/hw/android.hardware.wifi@1.0-service"
    "bin/hw/disable_contaminant_detection.sh"
    "bin/hw/gpsd"
    "bin/hw/hostapd"
    "bin/hw/lhd"
    "bin/hw/scd"
    "bin/hw/wpa_supplicant"
    "bin/hwclock"
    "bin/i2cdetect"
    "bin/i2cdump"
    "bin/i2cget"
    "bin/i2cset"
    "bin/iconv"
    "bin/id"
    "bin/ifconfig"
    "bin/init.insmod.sh"
    "bin/inotifyd"
    "bin/insmod"
    "bin/install"
    "bin/ionice"
    "bin/iorenice"
    "bin/kill"
    "bin/killall"
    "bin/ln"
    "bin/load_policy"
    "bin/log"
    "bin/logname"
    "bin/logwrapper"
    "bin/losetup"
    "bin/ls"
    "bin/lsattr"
    "bin/lsmod"
    "bin/lsof"
    "bin/lspci"
    "bin/lsusb"
    "bin/md5sum"
    "bin/microcom"
    "bin/misc_writer"
    "bin/mkdir"
    "bin/mkfifo"
    "bin/mknod"
    "bin/mkswap"
    "bin/mktemp"
    "bin/modinfo"
    "bin/modprobe"
    "bin/more"
    "bin/mount"
    "bin/mountpoint"
    "bin/mv"
    "bin/nc"
    "bin/netcat"
    "bin/netstat"
    "bin/nice"
    "bin/nl"
    "bin/nohup"
    "bin/nproc"
    "bin/nsenter"
    "bin/od"
    "bin/paste"
    "bin/patch"
    "bin/pgrep"
    "bin/pidof"
    "bin/pixelstats-vendor"
    "bin/pkill"
    "bin/pmap"
    "bin/printenv"
    "bin/printf"
    "bin/ps"
    "bin/pwd"
    "bin/readelf"
    "bin/readlink"
    "bin/realpath"
    "bin/rebalance_interrupts-vendor"
    "bin/renice"
    "bin/restorecon"
    "bin/rm"
    "bin/rmdir"
    "bin/rmmod"
    "bin/rtcwake"
    "bin/runcon"
    "bin/sed"
    "bin/sendevent"
    "bin/seq"
    "bin/setenforce"
    "bin/setprop"
    "bin/setsid"
    "bin/sh"
    "bin/sha1sum"
    "bin/sha224sum"
    "bin/sha256sum"
    "bin/sha384sum"
    "bin/sha512sum"
    "bin/sleep"
    "bin/sort"
    "bin/split"
    "bin/start"
    "bin/stat"
    "bin/stop"
    "bin/storageproxyd"
    "bin/strings"
    "bin/stty"
    "bin/swapoff"
    "bin/swapon"
    "bin/sync"
    "bin/sysctl"
    "bin/tac"
    "bin/tail"
    "bin/tar"
    "bin/taskset"
    "bin/tee"
    "bin/test"
    "bin/thermal_symlinks"
    "bin/time"
    "bin/timeout"
    "bin/toolbox"
    "bin/top"
    "bin/touch"
    "bin/toybox_vendor"
    "bin/tr"
    "bin/true"
    "bin/truncate"
    "bin/trusty_apploader"
    "bin/tty"
    "bin/uclampset"
    "bin/ulimit"
    "bin/umount"
    "bin/uname"
    "bin/uniq"
    "bin/unix2dos"
    "bin/unlink"
    "bin/unshare"
    "bin/uptime"
    "bin/usleep"
    "bin/uudecode"
    "bin/uuencode"
    "bin/uuidgen"
    "bin/vmstat"
    "bin/vndservice"
    "bin/vndservicemanager"
    "bin/watch"
    "bin/wc"
    "bin/which"
    "bin/whoami"
    "bin/xargs"
    "bin/xxd"
    "bin/yes"
    "bin/zcat"
    "build.prop"
    "etc/NOTICE.xml.gz"
    "etc/a2dp_audio_policy_configuration_7_0.xml"
    "etc/a2dp_in_audio_policy_configuration_7_0.xml"
    "etc/aoc/BLUETOOTH.dat"
    "etc/aoc/HANDSET.dat"
    "etc/aoc/HANDSFREE.dat"
    "etc/aoc/HEADSET.dat"
    "etc/aoc/mcps.dat"
    "etc/aoc/recording.gatf"
    "etc/audio_effects.xml"
    "etc/audio_platform_configuration.xml"
    "etc/audio_policy_configuration.xml"
    "etc/audio_policy_configuration_a2dp_offload_disabled.xml"
    "etc/audio_policy_configuration_bluetooth_legacy_hal.xml"
    "etc/audio_policy_configuration_le_offload_disabled.xml"
    "etc/audio_policy_volumes.xml"
    "etc/bluetooth/bt_vendor_overlay.conf"
    "etc/bluetooth_audio_policy_configuration_7_0.xml"
    "etc/bluetooth_power_limits.csv"
    "etc/bluetooth_power_limits_G9S9B_EU.csv"
    "etc/bluetooth_power_limits_G9S9B_US.csv"
    "etc/bluetooth_power_limits_GB7N6_EU.csv"
    "etc/bluetooth_power_limits_GB7N6_US.csv"
    "etc/bluetooth_power_limits_JP.csv"
    "etc/default_volume_tables.xml"
    "etc/display_colordata_cal0.pb"
    "etc/display_colordata_dev_cal0.pb"
    "etc/display_golden_cal0.pb"
    "etc/fs_config_dirs"
    "etc/fs_config_files"
    "etc/fstab.gs101"
    "etc/fstab.gs101-fips"
    "etc/fstab.persist"
    "etc/fstab.zram.2g"
    "etc/fstab.zram.3g"
    "etc/fstab.zram.40p"
    "etc/fstab.zram.4g"
    "etc/fstab.zram.50p"
    "etc/fstab.zram.5g"
    "etc/fstab.zram.60p"
    "etc/fstab.zram.6g"
    "etc/gnss/gps.cer"
    "etc/gnss/gps.xml"
    "etc/gnss/lhd.conf"
    "etc/gnss/scd.conf"
    "etc/group"
    "etc/hearing_aid_audio_policy_configuration_7_0.xml"
    "etc/init.insmod.gs101.cfg"
    "etc/init.insmod.oriole.cfg"
    "etc/init/android.hardware.atrace@1.0-service.pixel.rc"
    "etc/init/android.hardware.audio.service.rc"
    "etc/init/android.hardware.boot@1.2-service-gs101.rc"
    "etc/init/android.hardware.cas@1.2-service.rc"
    "etc/init/android.hardware.contexthub-service.generic.rc"
    "etc/init/android.hardware.drm-service.clearkey.rc"
    "etc/init/android.hardware.dumpstate@1.1-service.gs101.rc"
    "etc/init/android.hardware.gatekeeper@1.0-service.trusty.rc"
    "etc/init/android.hardware.graphics.allocator-aidl-service.rc"
    "etc/init/android.hardware.graphics.composer@2.4-service.rc"
    "etc/init/android.hardware.health-service.gs101.rc"
    "etc/init/android.hardware.media.omx@1.0-service.rc"
    "etc/init/android.hardware.neuralnetworks@1.3-service-armnn.rc"
    "etc/init/android.hardware.power-service.pixel-libperfmgr.rc"
    "etc/init/android.hardware.power.stats-service.pixel.rc"
    "etc/init/android.hardware.secure_element@1.2-service-gto-ese2.rc"
    "etc/init/android.hardware.secure_element@1.2-service-gto.rc"
    "etc/init/android.hardware.security.keymint-service.trusty.rc"
    "etc/init/android.hardware.sensors@2.1-service-multihal.rc"
    "etc/init/android.hardware.thermal@2.0-service.pixel.rc"
    "etc/init/android.hardware.usb-service.rc"
    "etc/init/android.hardware.usb.gadget-service.gs101.rc"
    "etc/init/android.hardware.vibrator-service.cs40l25.rc"
    "etc/init/android.hardware.wifi.supplicant-service.rc"
    "etc/init/android.hardware.wifi@1.0-service.rc"
    "etc/init/boringssl_self_test.rc"
    "etc/init/health-storage-default.rc"
    "etc/init/hostapd.android.rc"
    "etc/init/hw/init.aoc.rc"
    "etc/init/hw/init.gs101.rc"
    "etc/init/hw/init.gs101.usb.rc"
    "etc/init/hw/init.oriole.rc"
    "etc/init/hw/init.raviole.rc"
    "etc/init/init.pixel.rc"
    "etc/init/memtrack.rc"
    "etc/init/nfc-service-default.rc"
    "etc/init/pixel-mm-gki.rc"
    "etc/init/pixel-thermal-symlinks.rc"
    "etc/init/pixelstats-vendor.gs101.rc"
    "etc/init/pkvm_experiment.rc"
    "etc/init/rebalance_interrupts-vendor.gs101.rc"
    "etc/init/vndservicemanager.rc"
    "etc/libnfc-hal-st.conf"
    "etc/libse-gto-hal.conf"
    "etc/libse-gto-hal2.conf"
    "etc/media_codecs.xml"
    "etc/media_codecs_c2.xml"
    "etc/media_codecs_performance.xml"
    "etc/media_codecs_performance_c2.xml"
    "etc/media_profiles_V1_0.xml"
    "etc/mixer_paths.xml"
    "etc/mkshrc"
    "etc/modem/Pixel_Default.cfg"
    "etc/modem/Pixel_Default.nprf"
    "etc/modem/Pixel_Default_metrics.xml"
    "etc/modem/Pixel_stability.cfg"
    "etc/modem/Pixel_stability.nprf"
    "etc/modem/camera_front_mipi_coex_table.csv"
    "etc/modem/camera_rear_wide_mipi_coex_table.csv"
    "etc/modem/default.cfg"
    "etc/modem/default.nprf"
    "etc/modem/default_NAS_RRC.cfg"
    "etc/modem/default_NAS_RRC.nprf"
    "etc/modem/default_metrics.xml"
    "etc/modem/default_network.cfg"
    "etc/modem/default_network.nprf"
    "etc/modem/default_stability.cfg"
    "etc/modem/default_stability.nprf"
    "etc/modem/display_primary_mipi_coex_table.csv"
    "etc/modem/gnss_blanking.csv"
    "etc/modem/logging.conf"
    "etc/modem/teamfood_default.cfg"
    "etc/modem/teamfood_default.nprf"
    "etc/modem/teamfood_default_metrics.xml"
    "etc/passwd"
    "etc/permissions/android.hardware.audio.low_latency.xml"
    "etc/permissions/android.hardware.audio.pro.xml"
    "etc/permissions/android.hardware.bluetooth.xml"
    "etc/permissions/android.hardware.bluetooth_le.xml"
    "etc/permissions/android.hardware.camera.concurrent.xml"
    "etc/permissions/android.hardware.camera.flash-autofocus.xml"
    "etc/permissions/android.hardware.camera.front.xml"
    "etc/permissions/android.hardware.camera.full.xml"
    "etc/permissions/android.hardware.camera.raw.xml"
    "etc/permissions/android.hardware.context_hub.xml"
    "etc/permissions/android.hardware.device_unique_attestation.xml"
    "etc/permissions/android.hardware.fingerprint.xml"
    "etc/permissions/android.hardware.hardware_keystore.xml"
    "etc/permissions/android.hardware.keystore.app_attest_key.xml"
    "etc/permissions/android.hardware.location.gps.xml"
    "etc/permissions/android.hardware.nfc.ese.xml"
    "etc/permissions/android.hardware.nfc.hce.xml"
    "etc/permissions/android.hardware.nfc.hcef.xml"
    "etc/permissions/android.hardware.nfc.uicc.xml"
    "etc/permissions/android.hardware.nfc.xml"
    "etc/permissions/android.hardware.opengles.aep.xml"
    "etc/permissions/android.hardware.se.omapi.ese.xml"
    "etc/permissions/android.hardware.se.omapi.uicc.xml"
    "etc/permissions/android.hardware.sensor.accelerometer.xml"
    "etc/permissions/android.hardware.sensor.barometer.xml"
    "etc/permissions/android.hardware.sensor.compass.xml"
    "etc/permissions/android.hardware.sensor.dynamic.head_tracker.xml"
    "etc/permissions/android.hardware.sensor.gyroscope.xml"
    "etc/permissions/android.hardware.sensor.hifi_sensors.xml"
    "etc/permissions/android.hardware.sensor.light.xml"
    "etc/permissions/android.hardware.sensor.proximity.xml"
    "etc/permissions/android.hardware.sensor.stepcounter.xml"
    "etc/permissions/android.hardware.sensor.stepdetector.xml"
    "etc/permissions/android.hardware.strongbox_keystore.xml"
    "etc/permissions/android.hardware.telephony.carrierlock.xml"
    "etc/permissions/android.hardware.touchscreen.multitouch.jazzhand.xml"
    "etc/permissions/android.hardware.usb.accessory.xml"
    "etc/permissions/android.hardware.usb.host.xml"
    "etc/permissions/android.hardware.vulkan.compute.xml"
    "etc/permissions/android.hardware.vulkan.level.xml"
    "etc/permissions/android.hardware.vulkan.version.xml"
    "etc/permissions/android.hardware.wifi.aware.xml"
    "etc/permissions/android.hardware.wifi.direct.xml"
    "etc/permissions/android.hardware.wifi.passpoint.xml"
    "etc/permissions/android.hardware.wifi.rtt.xml"
    "etc/permissions/android.hardware.wifi.xml"
    "etc/permissions/android.software.device_id_attestation.xml"
    "etc/permissions/android.software.ipsec_tunnels.xml"
    "etc/permissions/android.software.midi.xml"
    "etc/permissions/android.software.opengles.deqp.level.xml"
    "etc/permissions/android.software.verified_boot.xml"
    "etc/permissions/android.software.vulkan.deqp.level.xml"
    "etc/permissions/com.nxp.mifare.xml"
    "etc/permissions/handheld_core_hardware.xml"
    "etc/powerhint.json"
    "etc/powerhint_a0.json"
    "etc/powerhint_a1.json"
    "etc/r_submix_audio_policy_configuration.xml"
    "etc/selinux/plat_pub_versioned.cil"
    "etc/selinux/plat_sepolicy_vers.txt"
    "etc/selinux/precompiled_sepolicy"
    "etc/selinux/precompiled_sepolicy.plat_sepolicy_and_mapping.sha256"
    "etc/selinux/precompiled_sepolicy.product_sepolicy_and_mapping.sha256"
    "etc/selinux/precompiled_sepolicy.system_ext_sepolicy_and_mapping.sha256"
    "etc/selinux/selinux_denial_metadata"
    "etc/selinux/vendor_file_contexts"
    "etc/selinux/vendor_hwservice_contexts"
    "etc/selinux/vendor_mac_permissions.xml"
    "etc/selinux/vendor_property_contexts"
    "etc/selinux/vendor_seapp_contexts"
    "etc/selinux/vendor_sepolicy.cil"
    "etc/selinux/vendor_service_contexts"
    "etc/selinux/vndservice_contexts"
    "etc/sound_trigger_configuration.xml"
    "etc/sysconfig/component-overrides.xml"
    "etc/task_profiles.json"
    "etc/thermal_info_config.json"
    "etc/thermal_info_config_WHI_A.json"
    "etc/thermal_info_config_charge.json"
    "etc/ueventd.rc"
    "etc/usb_audio_policy_configuration.xml"
    "etc/uwb/UWB-calibration-am.conf"
    "etc/uwb/UWB-calibration-ar.conf"
    "etc/uwb/UWB-calibration-at.conf"
    "etc/uwb/UWB-calibration-az.conf"
    "etc/uwb/UWB-calibration-be.conf"
    "etc/uwb/UWB-calibration-bg.conf"
    "etc/uwb/UWB-calibration-by.conf"
    "etc/uwb/UWB-calibration-ca.conf"
    "etc/uwb/UWB-calibration-ch.conf"
    "etc/uwb/UWB-calibration-cy.conf"
    "etc/uwb/UWB-calibration-cz.conf"
    "etc/uwb/UWB-calibration-de.conf"
    "etc/uwb/UWB-calibration-dk.conf"
    "etc/uwb/UWB-calibration-ee.conf"
    "etc/uwb/UWB-calibration-es.conf"
    "etc/uwb/UWB-calibration-fi.conf"
    "etc/uwb/UWB-calibration-fr.conf"
    "etc/uwb/UWB-calibration-gb.conf"
    "etc/uwb/UWB-calibration-gr.conf"
    "etc/uwb/UWB-calibration-hr.conf"
    "etc/uwb/UWB-calibration-hu.conf"
    "etc/uwb/UWB-calibration-id.conf"
    "etc/uwb/UWB-calibration-ie.conf"
    "etc/uwb/UWB-calibration-is.conf"
    "etc/uwb/UWB-calibration-it.conf"
    "etc/uwb/UWB-calibration-jp.conf"
    "etc/uwb/UWB-calibration-kg.conf"
    "etc/uwb/UWB-calibration-kz.conf"
    "etc/uwb/UWB-calibration-li.conf"
    "etc/uwb/UWB-calibration-lt.conf"
    "etc/uwb/UWB-calibration-lu.conf"
    "etc/uwb/UWB-calibration-lv.conf"
    "etc/uwb/UWB-calibration-mt.conf"
    "etc/uwb/UWB-calibration-ni.conf"
    "etc/uwb/UWB-calibration-nl.conf"
    "etc/uwb/UWB-calibration-no.conf"
    "etc/uwb/UWB-calibration-np.conf"
    "etc/uwb/UWB-calibration-pk.conf"
    "etc/uwb/UWB-calibration-pl.conf"
    "etc/uwb/UWB-calibration-pt.conf"
    "etc/uwb/UWB-calibration-py.conf"
    "etc/uwb/UWB-calibration-ro.conf"
    "etc/uwb/UWB-calibration-ru.conf"
    "etc/uwb/UWB-calibration-sb.conf"
    "etc/uwb/UWB-calibration-se.conf"
    "etc/uwb/UWB-calibration-si.conf"
    "etc/uwb/UWB-calibration-sk.conf"
    "etc/uwb/UWB-calibration-tj.conf"
    "etc/uwb/UWB-calibration-tm.conf"
    "etc/uwb/UWB-calibration-tw.conf"
    "etc/uwb/UWB-calibration-ua.conf"
    "etc/uwb/UWB-calibration-us.conf"
    "etc/uwb/UWB-calibration-uz.conf"
    "etc/vintf/compatibility_matrix.xml"
    "etc/vintf/manifest.xml"
    "etc/vintf/manifest/android.hardware.atrace@1.0-service.pixel.xml"
    "etc/vintf/manifest/android.hardware.cas@1.2-service.xml"
    "etc/vintf/manifest/android.hardware.contexthub-service.generic.xml"
    "etc/vintf/manifest/android.hardware.drm-service.clearkey.xml"
    "etc/vintf/manifest/android.hardware.gatekeeper@1.0-service.trusty.xml"
    "etc/vintf/manifest/android.hardware.gnss@2.1-service-brcm.xml"
    "etc/vintf/manifest/android.hardware.health-service.gs101.xml"
    "etc/vintf/manifest/android.hardware.power-service.pixel.xml"
    "etc/vintf/manifest/android.hardware.power.stats-service.pixel.xml"
    "etc/vintf/manifest/android.hardware.security.keymint-service.trusty.xml"
    "etc/vintf/manifest/android.hardware.sensors@2.1-multihal.xml"
    "etc/vintf/manifest/android.hardware.thermal@2.0-service.pixel.xml"
    "etc/vintf/manifest/android.hardware.usb-service.xml"
    "etc/vintf/manifest/android.hardware.usb.gadget@1.2-service.gs101.xml"
    "etc/vintf/manifest/android.hardware.vibrator-service.cs40l25.xml"
    "etc/vintf/manifest/android.hardware.wifi.hostapd.xml"
    "etc/vintf/manifest/android.hardware.wifi.supplicant.xml"
    "etc/vintf/manifest/android.hardware.wifi@1.0-service.xml"
    "etc/vintf/manifest/bluetooth_audio.xml"
    "etc/vintf/manifest/health-storage-default.xml"
    "etc/vintf/manifest/manifest_gralloc_aidl.xml"
    "etc/vintf/manifest/memtrack.xml"
    "etc/vintf/manifest/nfc-service-default.xml"
    "etc/vintf/manifest/pixel-display-default.xml"
    "etc/waves_config.ini"
    "etc/waves_preset.mps"
    "etc/wifi/coex_table.xml"
    "etc/wifi/p2p_supplicant_overlay.conf"
    "etc/wifi/wpa_supplicant.conf"
    "etc/wifi/wpa_supplicant_overlay.conf"
    "firmware/R-cs35l41-dsp1-spk-cali.bin"
    "firmware/R-cs35l41-dsp1-spk-diag.bin"
    "firmware/R-cs35l41-dsp1-spk-prot.bin"
    "firmware/SensorHub.patch"
    "firmware/cs35l41-dsp1-spk-cali.bin"
    "firmware/cs35l41-dsp1-spk-cali.wmfw"
    "firmware/cs35l41-dsp1-spk-diag.bin"
    "firmware/cs35l41-dsp1-spk-diag.wmfw"
    "firmware/cs35l41-dsp1-spk-prot.bin"
    "firmware/cs35l41-dsp1-spk-prot.wmfw"
    "firmware/mfc_fw.bin"
    "firmware/readme.md"
    "lib/android.hardware.audio.common-util.so"
    "lib/android.hardware.audio.common@5.0.so"
    "lib/android.hardware.audio.common@7.0-enums.so"
    "lib/android.hardware.audio.common@7.0-util.so"
    "lib/android.hardware.audio.common@7.0.so"
    "lib/android.hardware.audio.common@7.1-enums.so"
    "lib/android.hardware.audio.common@7.1-util.so"
    "lib/android.hardware.audio.effect@7.0-util.so"
    "lib/android.hardware.audio.effect@7.0.so"
    "lib/android.hardware.audio@7.0.so"
    "lib/android.hardware.audio@7.1-util.so"
    "lib/android.hardware.audio@7.1.so"
    "lib/android.hardware.bluetooth.audio-impl.so"
    "lib/android.hardware.bluetooth.audio@2.0.so"
    "lib/android.hardware.bluetooth.audio@2.1.so"
    "lib/android.hardware.cas.native@1.0.so"
    "lib/android.hardware.cas@1.0.so"
    "lib/android.hardware.cas@1.1.so"
    "lib/android.hardware.cas@1.2.so"
    "lib/android.hardware.graphics.composer@2.1.so"
    "lib/android.hardware.graphics.composer@2.2.so"
    "lib/android.hardware.graphics.composer@2.3.so"
    "lib/android.hardware.graphics.composer@2.4.so"
    "lib/android.hardware.power-V2-ndk.so"
    "lib/android.hardware.radio@1.0.so"
    "lib/android.hardware.radio@1.1.so"
    "lib/android.hardware.soundtrigger@2.1.so"
    "lib/android.hardware.soundtrigger@2.2.so"
    "lib/android.hardware.soundtrigger@2.3.so"
    "lib/android.hidl.allocator@1.0.so"
    "lib/arm.graphics-V1-ndk.so"
    "lib/com.google.hardware.pixel.display-V6-ndk.so"
    "lib/hw/android.hardware.audio.effect@7.0-impl.so"
    "lib/hw/android.hardware.audio@7.1-impl.so"
    "lib/hw/android.hardware.graphics.mapper@4.0-impl.so"
    "lib/hw/android.hardware.soundtrigger@2.3-impl.so"
    "lib/hw/audio.bluetooth.default.so"
    "lib/hw/audio.primary.default.so"
    "lib/hw/audio.r_submix.default.so"
    "lib/hw/audio.usb.default.so"
    "lib/hw/audio.usbv2.default.so"
    "lib/hw/gralloc.default.so"
    "lib/hw/hwcomposer.gs101.so"
    "lib/hw/local_time.default.so"
    "lib/hw/power.default.so"
    "lib/hw/vibrator.default.so"
    "lib/libExynosHWCService.so"
    "lib/libacryl.so"
    "lib/libacryl_hdr_plugin.so"
    "lib/libalsautils.so"
    "lib/libalsautilsv2.so"
    "lib/libavservices_minijail.so"
    "lib/libbluetooth_audio_session.so"
    "lib/libbluetooth_audio_session_aidl.so"
    "lib/libdrm.so"
    "lib/libdrmresource.so"
    "lib/libeffects.so"
    "lib/libeffectsconfig.so"
    "lib/libexynosdisplay.so"
    "lib/libhwjpeg.so"
    "lib/libion_google.so"
    "lib/libmediautils_vendor.so"
    "lib/libmemunreachable.so"
    "lib/libnbaio_mono.so"
    "lib/libopus.so"
    "lib/libprotobuf-cpp-full-3.9.1.so"
    "lib/libprotobuf-cpp-lite-3.9.1.so"
    "lib/libreference-ril.so"
    "lib/libril.so"
    "lib/librilutils.so"
    "lib/libstagefright_amrnb_common.so"
    "lib/libstagefright_enc_common.so"
    "lib/libstagefright_flacdec.so"
    "lib/libstagefright_soft_aacdec.so"
    "lib/libstagefright_soft_aacenc.so"
    "lib/libstagefright_soft_amrdec.so"
    "lib/libstagefright_soft_amrnbenc.so"
    "lib/libstagefright_soft_amrwbenc.so"
    "lib/libstagefright_soft_avcdec.so"
    "lib/libstagefright_soft_avcenc.so"
    "lib/libstagefright_soft_flacdec.so"
    "lib/libstagefright_soft_flacenc.so"
    "lib/libstagefright_soft_g711dec.so"
    "lib/libstagefright_soft_gsmdec.so"
    "lib/libstagefright_soft_hevcdec.so"
    "lib/libstagefright_soft_mp3dec.so"
    "lib/libstagefright_soft_mpeg2dec.so"
    "lib/libstagefright_soft_mpeg4dec.so"
    "lib/libstagefright_soft_mpeg4enc.so"
    "lib/libstagefright_soft_opusdec.so"
    "lib/libstagefright_soft_rawdec.so"
    "lib/libstagefright_soft_vorbisdec.so"
    "lib/libstagefright_soft_vpxdec.so"
    "lib/libstagefright_soft_vpxenc.so"
    "lib/libstagefright_softomx.so"
    "lib/libstagefright_softomx_plugin.so"
    "lib/libtinyalsav2.so"
    "lib/libvendorgraphicbuffer.so"
    "lib/libvibrator.so"
    "lib/libvorbisidec.so"
    "lib/libvpx.so"
    "lib/libwpa_client.so"
    "lib/mediacas/libclearkeycasplugin.so"
    "lib/mediadrm/libdrmclearkeyplugin.so"
    "lib/modules/abrolhos.ko"
    "lib/modules/acpm_flexpmu_dbg.ko"
    "lib/modules/acpm_mbox_test.ko"
    "lib/modules/aoc_alsa_dev.ko"
    "lib/modules/aoc_alsa_dev_util.ko"
    "lib/modules/aoc_channel_dev.ko"
    "lib/modules/aoc_char_dev.ko"
    "lib/modules/aoc_control_dev.ko"
    "lib/modules/aoc_core.ko"
    "lib/modules/aoc_usb_driver.ko"
    "lib/modules/aoc_uwb_platform_drv.ko"
    "lib/modules/aoc_uwb_service_dev.ko"
    "lib/modules/arm-memlat-mon.ko"
    "lib/modules/arm_dsu_pmu.ko"
    "lib/modules/at24.ko"
    "lib/modules/audiometrics.ko"
    "lib/modules/bbd.ko"
    "lib/modules/bc_max77759.ko"
    "lib/modules/bcm47765.ko"
    "lib/modules/bcm_dbg.ko"
    "lib/modules/bcmdhd4389.ko"
    "lib/modules/bigocean.ko"
    "lib/modules/boot_control_sysfs.ko"
    "lib/modules/boot_device_spi.ko"
    "lib/modules/clk_exynos.ko"
    "lib/modules/cmupmucal.ko"
    "lib/modules/coresight-etm4x.ko"
    "lib/modules/coresight-funnel.ko"
    "lib/modules/coresight-replicator.ko"
    "lib/modules/coresight-tmc.ko"
    "lib/modules/coresight.ko"
    "lib/modules/cp_thermal_zone.ko"
    "lib/modules/cpif.ko"
    "lib/modules/dbgcore-dump.ko"
    "lib/modules/debug-reboot.ko"
    "lib/modules/debug-snapshot-debug-kinfo.ko"
    "lib/modules/debug-snapshot-qd.ko"
    "lib/modules/debug-snapshot-sfrdump.ko"
    "lib/modules/drv2624.ko"
    "lib/modules/dss.ko"
    "lib/modules/dw3000.ko"
    "lib/modules/dwc3-exynos-usb.ko"
    "lib/modules/ect_parser.ko"
    "lib/modules/eh.ko"
    "lib/modules/ehld.ko"
    "lib/modules/exynos-acme.ko"
    "lib/modules/exynos-adv-tracer-s2d.ko"
    "lib/modules/exynos-adv-tracer.ko"
    "lib/modules/exynos-bcm_dbg-dump.ko"
    "lib/modules/exynos-bts.ko"
    "lib/modules/exynos-btsopsgs101.ko"
    "lib/modules/exynos-coresight-etm.ko"
    "lib/modules/exynos-coresight.ko"
    "lib/modules/exynos-cpuhp.ko"
    "lib/modules/exynos-cpupm.ko"
    "lib/modules/exynos-debug-test.ko"
    "lib/modules/exynos-dm.ko"
    "lib/modules/exynos-drm.ko"
    "lib/modules/exynos-ecc-handler.ko"
    "lib/modules/exynos-pd-dbg.ko"
    "lib/modules/exynos-pd.ko"
    "lib/modules/exynos-pd_el3.ko"
    "lib/modules/exynos-pm.ko"
    "lib/modules/exynos-pmu-if.ko"
    "lib/modules/exynos-reboot.ko"
    "lib/modules/exynos-seclog.ko"
    "lib/modules/exynos_devfreq.ko"
    "lib/modules/exynos_dit.ko"
    "lib/modules/exynos_mct.ko"
    "lib/modules/exynos_mfc.ko"
    "lib/modules/exynos_pm_qos.ko"
    "lib/modules/exynos_tty.ko"
    "lib/modules/exyswd-rng.ko"
    "lib/modules/ftm5.ko"
    "lib/modules/g2d.ko"
    "lib/modules/goodixfp.ko"
    "lib/modules/goog_touch_interface.ko"
    "lib/modules/google-battery.ko"
    "lib/modules/google-bms.ko"
    "lib/modules/google-charger.ko"
    "lib/modules/google-cpm.ko"
    "lib/modules/google_bcl.ko"
    "lib/modules/google_dock.ko"
    "lib/modules/google_dual_batt_gauge.ko"
    "lib/modules/governor_memlat.ko"
    "lib/modules/gpu_cooling.ko"
    "lib/modules/gs-chipid.ko"
    "lib/modules/gs101-itmon.ko"
    "lib/modules/gs101_spmic_thermal.ko"
    "lib/modules/gs101_thermal.ko"
    "lib/modules/gs_acpm.ko"
    "lib/modules/gsa.ko"
    "lib/modules/gsa_gsc.ko"
    "lib/modules/gsc-spi.ko"
    "lib/modules/gvotable.ko"
    "lib/modules/haptics-cs40l2x.ko"
    "lib/modules/hardlockup-debug.ko"
    "lib/modules/hardlockup-watchdog.ko"
    "lib/modules/heatmap.ko"
    "lib/modules/i2c-acpm.ko"
    "lib/modules/i2c-dev.ko"
    "lib/modules/i2c-exynos5.ko"
    "lib/modules/keycombo.ko"
    "lib/modules/keydebug.ko"
    "lib/modules/logbuffer.ko"
    "lib/modules/lwis.ko"
    "lib/modules/lzo-rle.ko"
    "lib/modules/lzo.ko"
    "lib/modules/mailbox-wc.ko"
    "lib/modules/mali_kbase.ko"
    "lib/modules/mali_pixel.ko"
    "lib/modules/max1720x-battery.ko"
    "lib/modules/max20339.ko"
    "lib/modules/max77729-pmic.ko"
    "lib/modules/max77729_charger.ko"
    "lib/modules/max77729_uic.ko"
    "lib/modules/max77759_charger.ko"
    "lib/modules/max77759_contaminant.ko"
    "lib/modules/max77759_helper.ko"
    "lib/modules/max77826-gs-regulator.ko"
    "lib/modules/mcps802154.ko"
    "lib/modules/mcps802154_region_fira.ko"
    "lib/modules/mcps802154_region_nfcc_coex.ko"
    "lib/modules/mcps802154_region_pctt.ko"
    "lib/modules/memlat-devfreq.ko"
    "lib/modules/modules.alias"
    "lib/modules/modules.blocklist"
    "lib/modules/modules.dep"
    "lib/modules/modules.load"
    "lib/modules/modules.softdep"
    "lib/modules/nitrous.ko"
    "lib/modules/odpm.ko"
    "lib/modules/overheat_mitigation.ko"
    "lib/modules/p9221.ko"
    "lib/modules/panel-boe-nt37290.ko"
    "lib/modules/panel-samsung-drv.ko"
    "lib/modules/panel-samsung-emul.ko"
    "lib/modules/panel-samsung-s6e3fc3-p10.ko"
    "lib/modules/panel-samsung-s6e3fc3.ko"
    "lib/modules/panel-samsung-s6e3hc2.ko"
    "lib/modules/panel-samsung-s6e3hc3-c10.ko"
    "lib/modules/panel-samsung-s6e3hc3.ko"
    "lib/modules/panel-samsung-s6e3hc4.ko"
    "lib/modules/panel-samsung-sofef01.ko"
    "lib/modules/pca9468.ko"
    "lib/modules/pcie-exynos-core.ko"
    "lib/modules/pcie-exynos-gs101-rc-cal.ko"
    "lib/modules/phy-exynos-mipi-dsim.ko"
    "lib/modules/phy-exynos-mipi.ko"
    "lib/modules/phy-exynos-usbdrd-super.ko"
    "lib/modules/pinctrl-samsung-core.ko"
    "lib/modules/pinctrl-slg51000.ko"
    "lib/modules/pixel-boot-metrics.ko"
    "lib/modules/pixel-debug-test.ko"
    "lib/modules/pixel_em.ko"
    "lib/modules/pixel_stat_mm.ko"
    "lib/modules/pixel_stat_sysfs.ko"
    "lib/modules/pktgen.ko"
    "lib/modules/pl330.ko"
    "lib/modules/pmic_class.ko"
    "lib/modules/power_stats.ko"
    "lib/modules/pps-gpio.ko"
    "lib/modules/pps_core.ko"
    "lib/modules/rtc-s2mpg10.ko"
    "lib/modules/s2mpg10-mfd.ko"
    "lib/modules/s2mpg10-powermeter.ko"
    "lib/modules/s2mpg10-regulator.ko"
    "lib/modules/s2mpg11-mfd.ko"
    "lib/modules/s2mpg11-powermeter.ko"
    "lib/modules/s2mpg11-regulator.ko"
    "lib/modules/s2mpg1x-gpio.ko"
    "lib/modules/s2mpu.ko"
    "lib/modules/s3c2410_wdt.ko"
    "lib/modules/samsung-dma.ko"
    "lib/modules/samsung-iommu-group.ko"
    "lib/modules/samsung-secure-iova.ko"
    "lib/modules/samsung_dma_heap.ko"
    "lib/modules/samsung_iommu.ko"
    "lib/modules/sbb-mux.ko"
    "lib/modules/sched_tp.ko"
    "lib/modules/sec_touch.ko"
    "lib/modules/sg.ko"
    "lib/modules/shm_ipc.ko"
    "lib/modules/sjtag-driver.ko"
    "lib/modules/slc_acpm.ko"
    "lib/modules/slc_dummy.ko"
    "lib/modules/slc_pmon.ko"
    "lib/modules/slc_pt.ko"
    "lib/modules/slg46826.ko"
    "lib/modules/slg51000-core.ko"
    "lib/modules/slg51000-regulator.ko"
    "lib/modules/smfc.ko"
    "lib/modules/snd-soc-cs35l41-i2c.ko"
    "lib/modules/snd-soc-cs35l41-spi.ko"
    "lib/modules/snd-soc-cs35l41.ko"
    "lib/modules/snd-soc-max98357a.ko"
    "lib/modules/snd-soc-rl6231.ko"
    "lib/modules/snd-soc-rt5682-i2c.ko"
    "lib/modules/snd-soc-rt5682.ko"
    "lib/modules/snd-soc-wm-adsp.ko"
    "lib/modules/snd_soc_cs40l2x.ko"
    "lib/modules/softdog.ko"
    "lib/modules/spi-s3c64xx.ko"
    "lib/modules/spidev.ko"
    "lib/modules/sscoredump.ko"
    "lib/modules/st21nfc.ko"
    "lib/modules/st33spi.ko"
    "lib/modules/st54spi.ko"
    "lib/modules/stmvl53l1.ko"
    "lib/modules/sysrq-hook.ko"
    "lib/modules/systrace.ko"
    "lib/modules/tcpci_fusb307.ko"
    "lib/modules/tcpci_max77759.ko"
    "lib/modules/touch_bus_negotiator.ko"
    "lib/modules/touch_offload.ko"
    "lib/modules/trusty-core.ko"
    "lib/modules/trusty-ipc.ko"
    "lib/modules/trusty-irq.ko"
    "lib/modules/trusty-log.ko"
    "lib/modules/trusty-test.ko"
    "lib/modules/trusty-virtio.ko"
    "lib/modules/ufs-exynos-core.ko"
    "lib/modules/ufs-pixel-fips140.ko"
    "lib/modules/usb_f_dm.ko"
    "lib/modules/usb_f_dm1.ko"
    "lib/modules/usb_f_etr_miu.ko"
    "lib/modules/usb_f_rndis.ko"
    "lib/modules/usb_psy.ko"
    "lib/modules/usbc_cooling_dev.ko"
    "lib/modules/vh_cgroup.ko"
    "lib/modules/vh_fs.ko"
    "lib/modules/vh_i2c.ko"
    "lib/modules/vh_mm.ko"
    "lib/modules/vh_preemptirq_long.ko"
    "lib/modules/vh_sched.ko"
    "lib/modules/vh_thermal.ko"
    "lib/modules/xhci-exynos.ko"
    "lib/modules/zcomp_cpu.ko"
    "lib/modules/zcomp_eh.ko"
    "lib/modules/zram.ko"
    "lib/modules/zsmalloc.ko"
    "lib/pixel-power-ext-V1-ndk.so"
    "lib/soundfx/libaudiopreprocessing.so"
    "lib/soundfx/libbundlewrapper.so"
    "lib/soundfx/libdownmix.so"
    "lib/soundfx/libdynproc.so"
    "lib/soundfx/libeffectproxy.so"
    "lib/soundfx/libhapticgenerator.so"
    "lib/soundfx/libldnhncr.so"
    "lib/soundfx/libreverbwrapper.so"
    "lib/soundfx/libvisualizer.so"
    "lib64/android.frameworks.sensorservice@1.0.so"
    "lib64/android.frameworks.stats-V1-ndk.so"
    "lib64/android.hardware.atrace@1.0.so"
    "lib64/android.hardware.audio.common-util.so"
    "lib64/android.hardware.audio.common@5.0.so"
    "lib64/android.hardware.audio.common@7.0-enums.so"
    "lib64/android.hardware.audio.common@7.0-util.so"
    "lib64/android.hardware.audio.common@7.0.so"
    "lib64/android.hardware.audio.common@7.1-enums.so"
    "lib64/android.hardware.audio.common@7.1-util.so"
    "lib64/android.hardware.audio.effect@7.0-util.so"
    "lib64/android.hardware.audio.effect@7.0.so"
    "lib64/android.hardware.audio@7.0.so"
    "lib64/android.hardware.audio@7.1-util.so"
    "lib64/android.hardware.audio@7.1.so"
    "lib64/android.hardware.bluetooth.audio-impl.so"
    "lib64/android.hardware.bluetooth.audio@2.0.so"
    "lib64/android.hardware.bluetooth.audio@2.1.so"
    "lib64/android.hardware.boot@1.0.so"
    "lib64/android.hardware.boot@1.1.so"
    "lib64/android.hardware.boot@1.2.so"
    "lib64/android.hardware.contexthub-V1-ndk.so"
    "lib64/android.hardware.contexthub@1.0.so"
    "lib64/android.hardware.dumpstate@1.0.so"
    "lib64/android.hardware.dumpstate@1.1.so"
    "lib64/android.hardware.gatekeeper@1.0.so"
    "lib64/android.hardware.gnss.measurement_corrections@1.0.so"
    "lib64/android.hardware.gnss.measurement_corrections@1.1.so"
    "lib64/android.hardware.gnss.visibility_control@1.0.so"
    "lib64/android.hardware.gnss@1.0.so"
    "lib64/android.hardware.gnss@1.1.so"
    "lib64/android.hardware.gnss@2.0.so"
    "lib64/android.hardware.gnss@2.1.so"
    "lib64/android.hardware.graphics.composer@2.1-resources.so"
    "lib64/android.hardware.graphics.composer@2.1.so"
    "lib64/android.hardware.graphics.composer@2.2-resources.so"
    "lib64/android.hardware.graphics.composer@2.2.so"
    "lib64/android.hardware.graphics.composer@2.3.so"
    "lib64/android.hardware.graphics.composer@2.4.so"
    "lib64/android.hardware.neuralnetworks@1.0.so"
    "lib64/android.hardware.neuralnetworks@1.1.so"
    "lib64/android.hardware.neuralnetworks@1.2.so"
    "lib64/android.hardware.neuralnetworks@1.3.so"
    "lib64/android.hardware.power-V1-ndk.so"
    "lib64/android.hardware.power-V2-ndk.so"
    "lib64/android.hardware.power.stats-impl.gs-common.so"
    "lib64/android.hardware.power.stats-impl.gs101.so"
    "lib64/android.hardware.power.stats-impl.pixel.so"
    "lib64/android.hardware.radio@1.0.so"
    "lib64/android.hardware.radio@1.1.so"
    "lib64/android.hardware.secure_element@1.0-impl-gto-ese2.so"
    "lib64/android.hardware.secure_element@1.0-impl-gto.so"
    "lib64/android.hardware.secure_element@1.0.so"
    "lib64/android.hardware.secure_element@1.1-impl-gto-ese2.so"
    "lib64/android.hardware.secure_element@1.1-impl-gto.so"
    "lib64/android.hardware.secure_element@1.1.so"
    "lib64/android.hardware.secure_element@1.2-impl-gto-ese2.so"
    "lib64/android.hardware.secure_element@1.2-impl-gto.so"
    "lib64/android.hardware.secure_element@1.2.so"
    "lib64/android.hardware.security.keymint-V1-ndk.so"
    "lib64/android.hardware.sensors@1.0.so"
    "lib64/android.hardware.sensors@2.0-ScopedWakelock.so"
    "lib64/android.hardware.sensors@2.0.so"
    "lib64/android.hardware.sensors@2.1.so"
    "lib64/android.hardware.soundtrigger@2.1.so"
    "lib64/android.hardware.soundtrigger@2.2.so"
    "lib64/android.hardware.soundtrigger@2.3.so"
    "lib64/android.hardware.thermal@1.0.so"
    "lib64/android.hardware.thermal@2.0.so"
    "lib64/android.hardware.usb.gadget@1.0.so"
    "lib64/android.hardware.usb.gadget@1.1.so"
    "lib64/android.hardware.usb.gadget@1.2.so"
    "lib64/android.hardware.wifi@1.0.so"
    "lib64/android.hardware.wifi@1.1.so"
    "lib64/android.hardware.wifi@1.2.so"
    "lib64/android.hardware.wifi@1.3.so"
    "lib64/android.hardware.wifi@1.4.so"
    "lib64/android.hardware.wifi@1.5.so"
    "lib64/android.hardware.wifi@1.6.so"
    "lib64/android.hidl.allocator@1.0.so"
    "lib64/android.system.keystore2-V1-ndk.so"
    "lib64/android.system.wifi.keystore@1.0.so"
    "lib64/arm.graphics-V1-ndk.so"
    "lib64/com.google.hardware.pixel.display-V6-ndk.so"
    "lib64/hw/android.hardware.audio.effect@7.0-impl.so"
    "lib64/hw/android.hardware.audio@7.1-impl.so"
    "lib64/hw/android.hardware.gnss@2.1-impl-google.so"
    "lib64/hw/android.hardware.graphics.allocator-aidl-impl.so"
    "lib64/hw/android.hardware.graphics.mapper@4.0-impl.so"
    "lib64/hw/android.hardware.soundtrigger@2.3-impl.so"
    "lib64/hw/android.hardware.vibrator-impl.cs40l25.so"
    "lib64/hw/audio.bluetooth.default.so"
    "lib64/hw/audio.primary.default.so"
    "lib64/hw/audio.r_submix.default.so"
    "lib64/hw/audio.usb.default.so"
    "lib64/hw/audio.usbv2.default.so"
    "lib64/hw/flp.default.so"
    "lib64/hw/gps.default.so"
    "lib64/hw/gralloc.default.so"
    "lib64/hw/hwcomposer.gs101.so"
    "lib64/hw/local_time.default.so"
    "lib64/hw/power.default.so"
    "lib64/hw/vibrator.default.so"
    "lib64/libExynosHWCService.so"
    "lib64/lib_android_keymaster_keymint_utils.so"
    "lib64/libacryl.so"
    "lib64/libacryl_hdr_plugin.so"
    "lib64/libadaptivecpu.so"
    "lib64/libalsautils.so"
    "lib64/libalsautilsv2.so"
    "lib64/libbinderdebug.so"
    "lib64/libbluetooth_audio_session.so"
    "lib64/libbluetooth_audio_session_aidl.so"
    "lib64/libcppbor_external.so"
    "lib64/libcppcose_rkp.so"
    "lib64/libdisppower-pixel.so"
    "lib64/libdrm.so"
    "lib64/libdrmresource.so"
    "lib64/libeffects.so"
    "lib64/libeffectsconfig.so"
    "lib64/libexynosdisplay.so"
    "lib64/libhidltransport.so"
    "lib64/libhwbinder.so"
    "lib64/libhwc2on1adapter.so"
    "lib64/libhwc2onfbadapter.so"
    "lib64/libhwjpeg.so"
    "lib64/libion_google.so"
    "lib64/libkeymaster_messages.so"
    "lib64/libkeymaster_portable.so"
    "lib64/libkeymint.so"
    "lib64/libkeystore-engine-wifi-hidl.so"
    "lib64/libkeystore-wifi-hidl.so"
    "lib64/libmediautils_vendor.so"
    "lib64/libmemtrack-pixel.so"
    "lib64/libmemunreachable.so"
    "lib64/libnbaio_mono.so"
    "lib64/libperfmgr.so"
    "lib64/libpixelhealth.so"
    "lib64/libpixelstats.so"
    "lib64/libprotobuf-cpp-full-3.9.1.so"
    "lib64/libprotobuf-cpp-lite-3.9.1.so"
    "lib64/libpuresoftkeymasterdevice.so"
    "lib64/libreference-ril.so"
    "lib64/libril.so"
    "lib64/librilutils.so"
    "lib64/libsensorndkbridge.so"
    "lib64/libsoft_attestation_cert.so"
    "lib64/libtextclassifier_hash.so"
    "lib64/libtinyalsav2.so"
    "lib64/libtrusty.so"
    "lib64/libvendorgraphicbuffer.so"
    "lib64/libvibrator.so"
    "lib64/libwifi-hal.so"
    "lib64/libwpa_client.so"
    "lib64/mediacas/libclearkeycasplugin.so"
    "lib64/mediadrm/libdrmclearkeyplugin.so"
    "lib64/nfc_nci.st21nfc.default.so"
    "lib64/pixel-power-ext-V1-ndk.so"
    "lib64/pixel_stateresidency_provider_aidl_interface-ndk.so"
    "lib64/pixelatoms-cpp.so"
    "lib64/soundfx/libaudiopreprocessing.so"
    "lib64/soundfx/libbundlewrapper.so"
    "lib64/soundfx/libdownmix.so"
    "lib64/soundfx/libdynproc.so"
    "lib64/soundfx/libeffectproxy.so"
    "lib64/soundfx/libhapticgenerator.so"
    "lib64/soundfx/libldnhncr.so"
    "lib64/soundfx/libreverbwrapper.so"
    "lib64/soundfx/libvisualizer.so"
    "odm/etc/build.prop"
    "odm/etc/group"
    "odm/etc/passwd"
    "odm_dlkm/etc/build.prop"
    "overlay/EmergencyInfo__auto_generated_rro_vendor.apk"
    "overlay/NfcNci__auto_generated_rro_vendor.apk"
    "overlay/ONS__auto_generated_rro_vendor.apk"
    "overlay/Settings__auto_generated_rro_vendor.apk"
    "overlay/StorageManager__auto_generated_rro_vendor.apk"
    "overlay/SystemUI__auto_generated_rro_vendor.apk"
    "overlay/TeleService__auto_generated_rro_vendor.apk"
    "overlay/Traceur__auto_generated_rro_vendor.apk"
    "overlay/framework-res__auto_generated_rro_vendor.apk"
    "vendor_dlkm/etc/build.prop"

    # Exclude overlays, symlinks and extra files that we override

    # Overlays
    "overlay/DMService__auto_generated_rro_vendor.apk"
    "overlay/Flipendo__auto_generated_rro_vendor.apk"
    "overlay/SettingsGoogle__auto_generated_rro_vendor.apk"
    "overlay/StorageManagerGoogle__auto_generated_rro_vendor.apk"
    "overlay/SystemUIGoogle__auto_generated_rro_vendor.apk"

    # Symlinks
    "lib/modules"

    # Exclude files that compile with BUILD_WITHOUT_VENDOR := false
    # or manually added as build targets in device-lineage.mk

    # Audio
    "lib/libaudioroutev2.so"
    "lib/libtinycompress.so"
    "lib64/libaudioroutev2.so"
    "lib64/libtinycompress.so"

    # Bluetooth
    "lib64/android.hardware.bluetooth@1.0.so"
    "lib64/android.hardware.bluetooth@1.1.so"
    "lib64/hardware.google.bluetooth.bt_channel_avoidance@1.0.so"
    "lib64/hardware.google.bluetooth.ccc@1.0.so"
    "lib64/hardware.google.bluetooth.ccc@1.1.so"
    "lib64/hardware.google.bluetooth.ewp@1.0.so"
    "lib64/hardware.google.bluetooth.ext@1.0.so"
    "lib64/hardware.google.bluetooth.sar@1.0.so"
    "lib64/hardware.google.bluetooth.sar@1.1.so"

    # Camera
    "lib/libGralloc4Wrapper.so"
    "lib64/libGralloc4Wrapper.so"

    # Codec2
    "lib/android.hardware.media.c2@1.0.so"
    "lib/libcodec2_hidl@1.0.so"
    "lib/libcodec2_hidl_plugin.so"
    "lib/libcodec2_vndk.so"
    "lib/libexynosutils.so"
    "lib/libexynosv4l2.so"
    "lib/libmedia_ecoservice.so"
    "lib/libsfplugin_ccodec_utils.so"
    "lib/libstagefright_bufferpool@2.0.1.so"
    "lib64/android.hardware.media.c2@1.0.so"
    "lib64/android.hardware.media.c2@1.1.so"
    "lib64/android.hardware.media.c2@1.2.so"
    "lib64/libavservices_minijail.so"
    "lib64/libcodec2_hidl@1.0.so"
    "lib64/libcodec2_hidl@1.1.so"
    "lib64/libcodec2_hidl@1.2.so"
    "lib64/libcodec2_hidl_plugin.so"
    "lib64/libcodec2_soft_common.so"
    "lib64/libcodec2_vndk.so"
    "lib64/libexynosutils.so"
    "lib64/libexynosv4l2.so"
    "lib64/libmedia_ecoservice.so"
    "lib64/libsfplugin_ccodec_utils.so"
    "lib64/libstagefright_bufferpool@2.0.1.so"

    # Confirmation UI
    "lib64/android.hardware.confirmationui@1.0.so"
    "lib64/libteeui_hal_support.so"

    # HIDL
    "lib/libhidltransport.so"
    "lib/libhwbinder.so"

    # Identity credential
    "etc/permissions/android.hardware.identity_credential.xml"
    "lib64/android.hardware.identity-support-lib.so"

    # Nos
    "lib64/libkeymaster4support.so"
    "lib64/libkeymint_support.so"
    "lib64/libnos.so"
    "lib64/libnos_client_citadel.so"
    "lib64/libnos_datagram.so"
    "lib64/libnos_datagram_citadel.so"
    "lib64/libnos_transport.so"
    "lib64/libnosprotos.so"
    "lib64/nos_app_avb.so"
    "lib64/nos_app_identity.so"
    "lib64/nos_app_keymaster.so"
    "lib64/nos_app_weaver.so"
    "lib64/pixelpowerstats_provider_aidl_interface-cpp.so"

    # Sensors
    "lib/android.hardware.sensors@1.0.so"
    "lib/android.hardware.sensors@2.0-ScopedWakelock.so"
    "lib/android.hardware.sensors@2.0.so"
    "lib/android.hardware.sensors@2.1.so"
    "lib/hw/sensors.dynamic_sensor_hal.so"
    "lib/libhidparser.so"
    "lib/libsensorndkbridge.so"
    "lib64/hw/sensors.dynamic_sensor_hal.so"
    "lib64/libhidparser.so"

    # Tether offload
    "lib64/libnetfilter_conntrack.so"
    "lib64/libnfnetlink.so"

    # Trusty
    "lib64/libtrusty_metrics.so"

    # Misc interfaces
    "lib/android.frameworks.sensorservice@1.0.so"
    "lib/android.frameworks.stats-V1-ndk.so"
    "lib/android.hardware.radio.config@1.0.so"
    "lib/android.hardware.radio.config@1.1.so"
    "lib/android.hardware.radio.config@1.2.so"
    "lib/android.hardware.radio.deprecated@1.0.so"
    "lib/android.hardware.radio@1.2.so"
    "lib/android.hardware.radio@1.3.so"
    "lib/android.hardware.radio@1.4.so"
    "lib/android.hardware.radio@1.5.so"
    "lib/android.hardware.radio@1.6.so"
    "lib/android.hardware.secure_element@1.0.so"
    "lib/android.hardware.secure_element@1.1.so"
    "lib/android.hardware.secure_element@1.2.so"
    "lib/android.hardware.thermal@1.0.so"
    "lib/android.hardware.thermal@2.0.so"
    "lib/com.google.hardware.pixel.display-V4-ndk.so"
    "lib/com.google.hardware.pixel.display-V5-ndk.so"
    "lib64/android.hardware.authsecret@1.0.so"
    "lib64/android.hardware.biometrics.common-V2-ndk.so"
    "lib64/android.hardware.biometrics.fingerprint-V2-ndk.so"
    "lib64/android.hardware.confirmationui@1.0-lib.trusty.so"
    "lib64/android.hardware.input.common-V1-ndk.so"
    "lib64/android.hardware.input.processor-V1-ndk.so"
    "lib64/android.hardware.keymaster@3.0.so"
    "lib64/android.hardware.keymaster@4.0.so"
    "lib64/android.hardware.keymaster@4.1.so"
    "lib64/android.hardware.neuralnetworks-V4-ndk.so"
    "lib64/android.hardware.power@1.0.so"
    "lib64/android.hardware.power@1.1.so"
    "lib64/android.hardware.power@1.2.so"
    "lib64/android.hardware.oemlock@1.0.so"
    "lib64/android.hardware.radio.config@1.0.so"
    "lib64/android.hardware.radio.config@1.1.so"
    "lib64/android.hardware.radio.config@1.2.so"
    "lib64/android.hardware.radio.deprecated@1.0.so"
    "lib64/android.hardware.radio@1.2.so"
    "lib64/android.hardware.radio@1.3.so"
    "lib64/android.hardware.radio@1.4.so"
    "lib64/android.hardware.radio@1.5.so"
    "lib64/android.hardware.radio@1.6.so"
    "lib64/android.hardware.tetheroffload.config@1.0.so"
    "lib64/android.hardware.tetheroffload.control@1.0.so"
    "lib64/android.hardware.tetheroffload.control@1.1.so"
    "lib64/android.hardware.weaver@1.0.so"
    "lib64/com.google.hardware.pixel.display-V4-ndk.so"
    "lib64/com.google.hardware.pixel.display-V5-ndk.so"

    # Completely skip files that are not required

    # Google
    "etc/default-permissions/default-permissions_talkback.xml"

    # Secure element
    "lib/android.hardware.secure_element@1.2-impl-gto.so"
    "lib/libstpreprocess21.so"
)

# Initialize the helper
setup_vendor_deps "${ANDROID_ROOT}"

generate_prop_list_from_image "${_input_image}" "${_output_file}" VENDOR_SKIP_FILES

# Fixups
function presign() {
    sed -i "s|vendor/${1}$|vendor/${1};PRESIGNED|g" "${_output_file}"
}

function as_module() {
    sed -i "s|vendor/${1}$|-vendor/${1}|g" "${_output_file}"
}

function header() {
    sed -i "1s/^/${1}\n/" "${_output_file}"
}

as_module "lib/libOpenCL.so"
as_module "lib64/libOpenCL.so"

header "# All blobs are extracted from Google factory images for each new ASB"
